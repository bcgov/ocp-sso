<!DOCTYPE html>
<html>
<head>
</head>
<body>
  <H1>Incident Submission Form</H1>
  
  
<script>
function createBody()
{
var theImpact = document.querySelector("input[name='impact']:checked");

var theUrgency =  document.querySelector("input[name='urgency']:checked");

var theUsername = document.getElementById('username').value;
var theEmail = document.getElementById('email').value;
var theTel = document.getElementById('phone').value;

var theAffApp = document.getElementById('affApp').value;

var priorityCalc = (theImpact.value*theUrgency.value)/3;

var thePriority  = priorityCalc.toPrecision(1); 

var theSummary = document.getElementById('summary').value;



var n="#### Name: "+theUsername+"\n\n#### Email: "+theEmail+"\n\n#### Phone: "+theTel+"\n\n#### Affected Application: "+theAffApp+"\n\n#### Impact:"+theImpact.value+"\n\n#### Urgency: "+theUrgency.value+"\n\n#### Priority: "+thePriority+"\n\n#### Impacted Service\n\n#### TBD";
  document.getElementById('body').value = n;
  //document.getElementById('title').value = theSummary;
//var n = theImpact.value+theUrgency.value;
alert(n);

}
 </script>
  <strong>Contact Information</strong>

<form id=mainForm>
  <label for="username">Your Name: </label>
  <input type="text" id="username" name="username" value="" required onchange="createBody()"><br>
  <label for="email">Email Address: </label>
  <input type="email" id="email" name="email" value="" required onchange="createBody()"><br>
  <label for="phone">Phone Number: </label>
  <input type="tel" id="phone" name="phone" value="" required onchange="createBody()"><br><br>

  <strong>Issue Summary</strong><br>
  <label for="summary">Summary:</label>
  <input type="text" id="summary" name="summary" value="Enter summary here" onchange="createBody()" onclick="this.value=''"><br><br>

  <strong>Which application is related to the issue?</strong><br>
  <label for="affApp">Application:</label>
  <select name="affApp" id="affApp">
    <option value="Realm-o-Matic">Realm-o-Matic</option>
    <option value="Keycloak SSO" selected>Keycloack SSO</option>
  </select><br><br>
  
  <!--Imapct-->
<strong>What is the impact of the issue?</strong><br>
  <input type="radio" id="impactHigh" name="impact" value="3"><label for="impactHigh">High Impact</label>
  <input type="radio" id="impactMedium" name="impact" value="2"><label for="impactMedium">Medium Impact</label>
  <input type="radio" id="impactLow" name="impact" value="1" checked="true"><label for="impactLow">Low Impact</label><br><br>
  
  <!--Urgency-->
<strong>What is the urgency of the issue?</strong><br>
  <input type="radio" id="urgencyHigh" name="urgency" value="3"><label for="urgencyHigh">High Impact</label>
  <input type="radio" id="urgencyMedium" name="urgency" value="2"><label for="urgencyMedium">Medium Impact</label>
  <input type="radio" id="urgencyLow" name="urgency" value="1" checked="true"><label for="urgencyLow">Low Impact</label><br><BR>
  
  <label for="description" style="font-weight: bold">Description </label> <br>
<textarea id="description" name="description" rows="4" cols="50" onclick="this.value=''">
Please describe your issue here.
</textarea>
  
  <!--build the body of the ticket-->
  <input type="button" value="Join!" onclick="createBody();">
  </form>

<div id="formSubmission></div>  
<form action="https://github.com/bcgov/ocp-sso/issues/new" id="mainForm">
  <input type="hidden" id="labels" name="labels" value="sso,incident">
  <input type="hidden" id="template" name="template" value="test.md">
  <input type="hidden" id="body" name="body">
  <input type="hidden" id="title" name="title">
  <input type="submit" value="Submit" >
</form> 

</body>
</html>

 


